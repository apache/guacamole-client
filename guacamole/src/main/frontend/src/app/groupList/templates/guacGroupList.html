<div class="group-list">

  <script id="nestedItem.html" type="text/ng-template">
    <div class="{{item.type}}" ng-if="isVisible(item.type)"
         ng-class="{
                balancer   : item.balancing,
                expanded   : item.expanded,
                expandable : item.expandable,
                empty      : !item.children.length
            }">

      <!-- Item caption -->
      <div class="caption">

        <!-- Expand/collapse icon -->
        <div class="icon expand" ng-click="toggleExpanded(item)"
             ng-if="item.expandable"></div>

        <ng-include src="templates[item.type]"></ng-include>

      </div>

      <!-- Children of item (if any) -->
      <div class="children" ng-if="item.expanded">
        <div class="list-item" ng-repeat="item in item.children | orderBy : 'name'"
             ng-include="'nestedItem.html'"></div>
      </div>

    </div>
  </script>

  <!-- Root-level connections / groups -->
  <div class="group-list-page">
    <div class="list-item" ng-include="'nestedItem.html'" ng-repeat="item in childrenPage"></div>
  </div>

  <!-- Pager for connections / groups -->
  <guac-pager items="rootItems | orderBy : ['weight', 'name']" page="childrenPage"
              page-size="pageSize"></guac-pager>

</div>
