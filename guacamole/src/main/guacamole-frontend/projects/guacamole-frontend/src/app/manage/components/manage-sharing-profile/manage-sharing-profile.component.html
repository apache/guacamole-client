<div class="manage-sharing-profile view" [ngClass]="{loading: !isLoaded()}">

    <ng-container *ngIf="isLoaded()">

        <!-- Main property editor -->
        <div class="header">
            <h2>{{ 'MANAGE_SHARING_PROFILE.SECTION_HEADER_EDIT_SHARING_PROFILE' | transloco }}</h2>
            <guac-user-menu></guac-user-menu>
        </div>
        <div class="section">
            <table class="properties">
                <tr>
                    <th>{{ 'MANAGE_SHARING_PROFILE.FIELD_HEADER_NAME' | transloco }}</th>
                    <td><input type="text" [(ngModel)]="sharingProfile.name"
                               autocorrect="off" autocapitalize="off"></td>
                </tr>
                <tr>
                    <th>{{ 'MANAGE_SHARING_PROFILE.FIELD_HEADER_PRIMARY_CONNECTION' | transloco }}</th>
                    <td>{{ primaryConnection.name }}</td>
                </tr>
            </table>
        </div>

        <!-- Sharing profile attributes section -->
        <div class="attributes">
            <guac-form namespace="'SHARING_PROFILE_ATTRIBUTES'" [content]="attributes"
                       [modelFormGroup]="sharingProfileAttributesFormGroup"
                       [modelOnly]="!managementPermissions.canChangeAllAttributes"></guac-form>
        </div>

        <!-- Sharing profile parameters -->
        <h2 class="header">{{ 'MANAGE_SHARING_PROFILE.SECTION_HEADER_PARAMETERS' | transloco }}</h2>
        <div class="section connection-parameters" [ngClass]="{loading: !parameters}">
            <guac-form [namespace]="getNamespace(primaryConnection.protocol)"
                       [content]="protocols[primaryConnection.protocol].sharingProfileForms"
                       [modelFormGroup]="parametersFormGroup"></guac-form>
        </div>

        <!-- Form action buttons -->
        <management-buttons namespace="MANAGE_SHARING_PROFILE"
                            [permissions]="managementPermissions"
                            [save]="saveSharingProfile.bind(this)"
                            [delete]="deleteSharingProfile.bind(this)"
                            [clone]="cloneSharingProfile.bind(this)"
                            [return]="returnToConnectionList.bind(this)">
        </management-buttons>

    </ng-container>

</div>
